<!DOCTYPE html>
<html lang="zh-tw">
    <head>
        <meta charset="utf-8">
        <title>First Page</title>
    <link rel="stylesheet" href="main.css">
    <script>
 	// This is called with the results from from FB.getLoginStatus().
    function statusChangeCallback(response) {
    // The response object is returned with a status field that lets the app know the current login status of the person.
    if (response.status === 'connected') {
    console.log('Welcome! Fetching your information.... ');
   
    FB.api('/me', function(response) {
    	console.log('Successful login for: ' + response.name);
    	document.getElementById('status').innerHTML =
    	'Thanks for logging in, ' + response.name + '!';
    	 console.log(JSON.stringify(response));
    	 request =  new XMLHttpRequest();
    	 request.send(null);
   	});
    
   
    } else if (response.status === 'not_authorized') {
    // The person is logged into Facebook, but not your app.
    document.getElementById('status').innerHTML = 'Please log ' + 'into this app.';
    } else {
    // The person is not logged into Facebook, so we're not sure if they are logged into this app or not.
    document.getElementById('status').innerHTML = 'Please log ' + 'into Facebook.';
    }
    }
//     var str = 'GET graph.facebook.com/bgolub?fields=id,name,gender';
//     console.log(JSON.stringify(str));
    window.fbAsyncInit = function() {
    	FB.init({
    	appId :'930174000431558',
    	cookie : true, // enable cookies to allow the server to access the session
    	xfbml : true, // parse social plugins on this page
    	version : 'v2.1' // use version 2.1
    	});
    	 
    	// Now that we've initialized the JavaScript SDK, we call FB.getLoginStatus().
    	// This function gets the state of the person visiting this page.
    	FB.getLoginStatus(function(response) {
    	statusChangeCallback(response);
    	});
    };
   
    function logOut(){
    	FB.logout(function(response) {
    		   // Person is now logged out
    		document.getElementById('status').innerHTML =
    		    'please log in';
    	});	
    }

 // This function is called when someone finishes with the Login Button.
    function checkLoginState() {
    FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
    });
    }
    (function(d, s, id) {
    	var js, fjs = d.getElementsByTagName(s)[0];
    	if (d.getElementById(id)) return;
    	js = d.createElement(s); js.id = id;
    	js.src = "//connect.facebook.net/en_US/sdk.js";
    	fjs.parentNode.insertBefore(js, fjs);
    	}(document, 'script', 'facebook-jssdk'));
    </script>
</head>
<body>
 	<h1>============================================================================</h1>	
 <div
  class="fb-like"
  data-share="true"
  data-width="450"
  data-show-faces="true">
       <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
		</fb:login-button>
		<div id="status">
		</div> 
		
		
</div>
 

<script>

</script>
		
	<h1>============================================================================</h1>		
    <div id="allPage">
        <h1>Javascript Homework</h1>
        <ul>
            <li><a href="multiplication.html">99乘法表</a></li>
            <li><a href="formCheck.html">Form Check</a></li>
            <li><a href="rating.html">點擊評分</a></li>
            <li><a href="ad.html">廣告輪播</a></li>
            <li><a href="calendarScroll.html">日期</a></li>
        </ul>
        <div id="content">
            
        </div>

    </div>
    <h5><input type="button" value="log out" onclick="logOut()"></h5>
</body>
</html>